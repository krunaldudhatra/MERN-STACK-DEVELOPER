{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kruna\\\\Desktop\\\\MERN STACK DEVELOPER\\\\5_ReactJs\\\\Projects\\\\Photofolio-main (1)\\\\src\\\\Component\\\\ImageList\\\\ImageList.js\",\n  _s = $RefreshSig$();\n// react hooks\nimport { useEffect, useState } from \"react\";\n\n// required Components to render \nimport ImageForm from \"../ImageForm/ImageForm\";\nimport Image from \"../Image/Image\";\n\n// import styles\nimport styles from \"./imageList.module.css\";\n\n// firestore database\nimport { db } from \"../../firebaseInit\";\nimport { doc, updateDoc, arrayRemove, onSnapshot } from \"firebase/firestore\";\n\n// toast notification\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\n// function to render all the images within any Album\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ImageList(props) {\n  _s();\n  // variables to store data\n\n  // open or close one album\n  const {\n    openAlbum,\n    setOpenAlbum\n  } = props;\n  // to show or hide add image form\n  const [showImageForm, setShowImageForm] = useState(false);\n  // for updating an image\n  const [updateImage, setUpdateImage] = useState(null);\n  // imagelist containing all the images within an album\n  const [imageList, setImageList] = useState([]);\n  // for searching image within an album\n  const [search, setSearch] = useState('');\n\n  // for image lightbox\n  const [isOpen, setIsOpen] = useState(false);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n\n  // to redirect back to album list page\n  function handleBackClick(e) {\n    e.preventDefault();\n    setOpenAlbum({\n      albumId: \"\",\n      show: false\n    });\n  }\n\n  // get all the images from database \n  useEffect(() => {\n    const unsub = onSnapshot(doc(db, \"album\", openAlbum.albumId), doc => {\n      const data = doc.data().imageList;\n      setImageList(data);\n    });\n  }, []);\n\n  // deleting an image from list\n  async function handleImageDelete(image) {\n    const albumRef = doc(db, 'album', openAlbum.albumId);\n    await updateDoc(albumRef, {\n      imageList: arrayRemove(image)\n    });\n    toast.success(\"Image Successfully Deleted from your Album!\");\n  }\n\n  // updating any image\n  function handleImageEdit(image) {\n    setUpdateImage(image);\n    setShowImageForm(true);\n  }\n\n  // open lightbox\n  const openLightbox = index => {\n    setCurrentImageIndex(index);\n    setIsOpen(true);\n  };\n\n  // close lightbox\n  const closeLightbox = () => {\n    setIsOpen(false);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.btnContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `${styles.btn} ${styles.backBtn}`,\n        onClick: handleBackClick,\n        children: \"Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search Image...\",\n        onChange: e => setSearch(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `${styles.btn} ${styles.addBtn}`,\n        onClick: () => setShowImageForm(!showImageForm),\n        children: !showImageForm ? \"Add Image\" : \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: [showImageForm && /*#__PURE__*/_jsxDEV(ImageForm, {\n        albumId: openAlbum.albumId,\n        updateImage: updateImage,\n        setUpdateImage: setUpdateImage,\n        setShowImageForm: setShowImageForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 35\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: \"#001055\",\n          textTransform: 'capitalize'\n        },\n        children: imageList.length !== 0 ? \"Your Collection\" : \"No Images in Your Collection\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.imageList,\n      children: imageList.filter(image => {\n        return search.toLocaleLowerCase() === '' ? image : image.name.toLocaleLowerCase().includes(search);\n        // map function to map over each image and show them inside a card\n      }).map((image, i) => /*#__PURE__*/_jsxDEV(Image, {\n        image: image,\n        index: i,\n        handleImageEdit: handleImageEdit,\n        handleImageDelete: handleImageDelete,\n        openLightbox: openLightbox\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 37\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this), isOpen &&\n    /*#__PURE__*/\n    // main container\n    _jsxDEV(\"div\", {\n      className: \"lightbox-overlay\",\n      onClick: closeLightbox,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lightbox-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"close-button\",\n          onClick: closeLightbox,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"lightbox-image\",\n          src: imageList[currentImageIndex].link,\n          alt: `Image ${currentImageIndex}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n}\n_s(ImageList, \"5J4uh2gK72vHAVwkFdXx4W3swMg=\");\n_c = ImageList;\nvar _c;\n$RefreshReg$(_c, \"ImageList\");","map":{"version":3,"names":["useEffect","useState","ImageForm","Image","styles","db","doc","updateDoc","arrayRemove","onSnapshot","ToastContainer","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","ImageList","props","_s","openAlbum","setOpenAlbum","showImageForm","setShowImageForm","updateImage","setUpdateImage","imageList","setImageList","search","setSearch","isOpen","setIsOpen","currentImageIndex","setCurrentImageIndex","handleBackClick","e","preventDefault","albumId","show","unsub","data","handleImageDelete","image","albumRef","success","handleImageEdit","openLightbox","index","closeLightbox","children","fileName","_jsxFileName","lineNumber","columnNumber","className","btnContainer","btn","backBtn","onClick","type","placeholder","onChange","target","value","addBtn","style","textAlign","color","textTransform","length","filter","toLocaleLowerCase","name","includes","map","i","src","link","alt","_c","$RefreshReg$"],"sources":["C:/Users/kruna/Desktop/MERN STACK DEVELOPER/5_ReactJs/Projects/Photofolio-main (1)/src/Component/ImageList/ImageList.js"],"sourcesContent":["// react hooks\nimport { useEffect, useState } from \"react\";\n\n// required Components to render \nimport ImageForm from \"../ImageForm/ImageForm\";\nimport Image from \"../Image/Image\";\n\n\n// import styles\nimport styles from \"./imageList.module.css\"\n\n\n// firestore database\nimport { db } from \"../../firebaseInit\";\nimport { doc, updateDoc,arrayRemove, onSnapshot } from \"firebase/firestore\";\n\n\n// toast notification\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\n\n// function to render all the images within any Album\nexport default function ImageList(props){\n\n    // variables to store data\n    \n    // open or close one album\n    const {openAlbum,setOpenAlbum}=props;\n    // to show or hide add image form\n    const [showImageForm,setShowImageForm]=useState(false);\n    // for updating an image\n    const [updateImage,setUpdateImage]=useState(null);\n    // imagelist containing all the images within an album\n    const [imageList,setImageList]=useState([]);\n    // for searching image within an album\n    const [search,setSearch]=useState('');\n\n    // for image lightbox\n    const [isOpen, setIsOpen] = useState(false);\n    const [currentImageIndex, setCurrentImageIndex] = useState(0);\n\n    // to redirect back to album list page\n    function handleBackClick(e){\n        e.preventDefault();\n        setOpenAlbum({albumId:\"\",show:false});\n    }\n\n    // get all the images from database \n    useEffect(()=>{\n        const unsub = onSnapshot(doc(db, \"album\",openAlbum.albumId), (doc) => {\n            const data=doc.data().imageList;      \n            setImageList(data);\n        });\n    },[]);\n\n    // deleting an image from list\n    async function handleImageDelete(image){\n        const albumRef = doc(db, 'album', openAlbum.albumId);\n        await updateDoc(albumRef,{\n            imageList:arrayRemove(image)\n        });\n        toast.success(\"Image Successfully Deleted from your Album!\");\n    }\n\n    // updating any image\n    function handleImageEdit(image){\n        setUpdateImage(image);\n        setShowImageForm(true);\n    }\n\n    // open lightbox\n    const openLightbox = (index) => {\n        setCurrentImageIndex(index);\n        setIsOpen(true);\n    };\n\n    // close lightbox\n    const closeLightbox = () => {\n        setIsOpen(false);\n    };\n\n    return(\n        <>\n            <ToastContainer />\n            {/* button container */}\n            <div className={styles.btnContainer}>\n\n                {/* back button to redirect to album list page */}\n                <button className={`${styles.btn} ${styles.backBtn}`} \n                        onClick={handleBackClick}>Back\n                </button>\n\n                {/* input box to search image in album */}\n                <input type=\"text\" \n                        placeholder=\"Search Image...\" \n                        onChange={(e)=> setSearch(e.target.value)} />\n                \n                {/* Add image / cancel button */}\n                {/* open / hide image form */}\n                <button className={`${styles.btn} ${styles.addBtn}`} \n                        onClick={()=>setShowImageForm(!showImageForm)}>\n                            {!showImageForm?\"Add Image\":\"Cancel\"}\n                </button>\n            </div>\n\n            {/* image form to add image */}\n            <div style={{textAlign:\"center\"}}>\n                {showImageForm && <ImageForm albumId={openAlbum.albumId} \n                                            updateImage={updateImage}\n                                            setUpdateImage={setUpdateImage}\n                                            setShowImageForm={setShowImageForm} />}\n                {/* collection heading on condition */}\n                {/* if album is empty it will show different heading */}\n                <h1 style={{color:\"#001055\", textTransform:'capitalize'}}>{imageList.length !== 0 ?\"Your Collection\":\"No Images in Your Collection\"}</h1>\n            </div>\n                \n            {/* looping over each image in list and showing them within a box */}\n            <div className={styles.imageList}>\n                {/* filter function to show search images if user enter something inside search bar */}\n                {imageList.filter((image) => {\n                    return search.toLocaleLowerCase() === ''\n                    ? image\n                    :image.name.toLocaleLowerCase().includes(search);\n                    // map function to map over each image and show them inside a card\n                }).map((image,i) => <Image image={image} \n                                                key={i}\n                                                index={i}\n                                                handleImageEdit={handleImageEdit} \n                                                handleImageDelete={handleImageDelete} \n                                                openLightbox={openLightbox}\n                                                />)}\n            </div>\n\n            {/* if user click over an image then light box will get open */}\n            {isOpen && (\n                // main container\n                <div className=\"lightbox-overlay\" onClick={closeLightbox}>\n                    <div className=\"lightbox-container\">\n                        {/* close button to close the light box */}\n                        <button className=\"close-button\" onClick={closeLightbox}>\n                            Close\n                        </button>\n                        {/* image of the lightbox */}\n                        <img\n                            className=\"lightbox-image\"\n                            src={imageList[currentImageIndex].link}\n                            alt={`Image ${currentImageIndex}`}\n                        />\n                    </div>\n                </div>\n            )}\n        </>\n    )\n}\n\n                    "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}